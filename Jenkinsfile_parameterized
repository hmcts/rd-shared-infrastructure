#!groovy
// @Library('Infrastructure@import_sb_modules') _

@Library('Infrastructure') _

properties([
    parameters([
			choice(name: 'ENVIRONMENT', choices: 'sandbox\nsaat\nsprod', description: 'Environment where code should be build and deployed')
		]),
   [$class: 'BuildDiscarderProperty', strategy: [$class: 'LogRotator', artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '7', numToKeepStr: '30']]
])

echo "Building Reference Data infrastructure in environment '${params.ENVIRONMENT}'"

withParameterizedInfraPipeline('rd', params.ENVIRONMENT, 'sandbox', '') {
  // importServiceBusModules('rd-servicebus-sandbox', 'rd-caseworker-topic-sandbox', 'rd-caseworker-subscription-sandbox', 'rd-sandbox')
}